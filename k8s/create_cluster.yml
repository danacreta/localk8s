---
- name: create cluster minikube
  hosts: localhost
  gather_facts: False

  ## TODO - should we install minikube & kubectl and other resources?
  tasks:
    - name: check the status of minikube.
      command: minikube status
      register: minikube_status
      changed_when: false
      ignore_errors: true

    - name: start minikube if it's not running.
      command: minikube start
      when: "not minikube_status.stdout or 'Running' not in minikube_status.stdout"

    - name: unpause minikube if it's paused.
      command: minikube unpause
      when: "'Paused' in minikube_status.stdout"